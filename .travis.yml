language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: 'true'
  - ROLE_NAME: tomcat8
  - EC2_REGION: us-east-1
  - secure: t5LLzKwvmc1fMN2oI3x8vWBO2d7RLS8YkOXja7G1PsryzqDRrg4w9ySQIvMxx+vpkGk4KzX64qXC2/OuzaJXrulbFRcvEk0sWKlVEDulFyy9qjLH+PlVjjicMb/ofvypjDCh5aBMTzhEqlNYSa+C+xcV2L0O45mjMN+zcEEwt4jNZE8vi0iyNzBXebnEgrlJDUYIRFEnEWTqa8fpXORI5p6rh/LOYeZqdqOGSyFqLsoNZtPs1IKo1MBkUJqtZDaSDZsHvr7xZvOk4N0035EnpjxVepf0FqdWlbLF4lloBs0PQfMbNp0lZig0uhi8OF/neYcEYXjLjdQnpXU2EtLP85JaaE2SKZm+O0jcMtzwhKleWA8DcSkjPGCQNX6OfbmAj2vnMJl+y2EfPeUNuxVllCX0FVSxb3GKdwFyLU0lVRVJH/iX7rDHWJfuUvI15DFP4KQ9K9V1DPSACnsiUU9o9quqmOIkpfrLRCb4YfK0UQ2goGaAWoC/kFjZqiJ2BKM0pQQG+10KMnqb+3O61zcHT0jyU+jirxXEvi7JUmKvZ3viVGQCh1WYbdkiqnHLWv3k5k0+vxpKADsSXVyMgrV/jICFCsvgoJgjfzOnhAJp69GO0IIhF9q+Az5jQcSfCBj62J4H7AGxTBQVSW1Gd4X5Nao+4ZPPPo/4zC1IKaodq2w=
  - secure: ICn5UOHLvO7D1mqbxQmJtUUImOHrIjKVOf/NMa+hjzxTVX5t62XHwOJXYgeJ0RO9kfonOSYHgJR/6hxZprenVya1NY/YM370pV1wsKFpJnym0/MFgRHF39LcUIwbXW9EcaFSpWH/CisaCPX1Py+au9zha2AsPMyikbVzr/faf9KzXBeIWiftdmKVzkl4GXuAdLDswG6lGrUIEBLhrYU21Sk/MKWiOBEOPtYTszXc0QniQFZ91emK6HKUG+1QRBlgrWDK3zjLAHxXXN2rrvqXx57xpJqUSuW57ttYs6Z9CzMSIPE+TOVG5uYSqsUE1VUKcw+F9nKN+47bvGCZAM03U3qYTYoigKObOG1KzyLjNdy4ZUlSRt7rzUZ8tOdJvB0dFsrY6Zkt9opGfvAiKHSdOAS49Nni+RWIjSzAFYwfwQIUCRdRmb1NCHTsCu9khTS4rfSaYUUXeEjQsUZKWxdsha6NTdkXTUwGw8jRis7Fi8kj/NsicmBB4Hw730XIivwJ5loZb8bM6xEAqe8JZTa+8mUHiTruIkKdTIu6p3lC4xzKjOKgGfA8N24QdyaImSeoct5am6pkA++6UGQTOdnuKUS8XSfVLd9AL1dId+46aBpDv9j7cwUcrfT9NpIuvCYZzd5QnMOdgCMZIq6gNlY4E2vOdSpKsK/XxsoR8wMI6eM=
  - secure: k74mw59dYQbo8WN5l1ojlURU+VECBXnVLEkOO0fyWa/I8nWtUPTUvxE5WfDXEsYzMhZR7Sq5dnhrONGLhAAM1Uq/Id+14FV4KL1XAsHviCUxKVEj1d8PilByjLXfVhpqwIxuVoIHe+PiUalBtYAe0kqj7Exfq0wTLFkrNLKiwJSlL+pvdTZJQYu1joUm/EkeS2RW0BSwSh3LyLyH18Qh9kVcPg+ctfkdo9wAgEiJbv8irqLX7SMMFuLdS2td6Nh0zc8yjwwE/QE9D5P08pqnWl965XUZf1RKIn8wt87Xtg4S6y2kZvQ9xj+GT6w4O7IE/wa5n5P9kdEk4Yyd8LtduYvIS/03OyNmDdKQxvkrIMAbz5SpHcEfuyYUOeBP6G/tO5ik29WUQg+Tga8BOO2PT3LDmWz0AS+BOr1Hh8tBV4r1OlYeO21Va82nBD1hc6yRDIo94p/JjC9N4YPemBVo3YRFTNuf3jDqgmgHIB+t5TTtnUt8P5lWRPzNY2ttTccU+tIa1fmJYwuJNmeHoUXHhSRUOkdBQmgL39d6OIXfcFOy/CHwF8fpZg1kPdF66LsFNPCcpIjzwOwAxMpHlnbXTuTkrxe9uyn6UbDtJWtkeMB/M0jazNWqtfKek23ovJ0ShB9zKDVupB0V1BoBzGOYPz08+bko2Kl8fPmK/BL7OZA=
  - secure: AVRK+S47pSki5Jo+yRR8usk7AI6IPgqLutMkSogUuzkNAIq1EK9CUkvIKQhUdYnPEiePGZaqySZ15Q1ncYbtMi2+63FO8/EBGjLII2RpjpDN6sYO0KPeNUAdFjJmsQptfgb1/Ziq8yjsF3jXbBs2lX5SIn+keDxPdRNE9et6TJspGS+OH9bZyh5tezNEusM8otnMVxIszvc6xVEc/0vBUbmChPd14zyYV9F+ueGcMcEtUg1LPSwgWCR22y5V6X/wl7iktV8P1dWHwyCrO746+s2g4/sB2do8O35WKbkFQ/2czIZDGuB1T57E1T/io48Lv5d37cikgVFlAhRTYfUCWdxwVbpT6UJDykCCOkEfQxidQ2slHLFSH5ejZIF00dqmJ2ZmbcrYe+6CPFC9IZFdnbtjuWHlo62913kj+OcnHEtn/qH+cQYEYwWocg6dW6ZHBU/Ybt+KYtYyS11y2Ea0C0yVXMTdRxxAWzLkyfzN3ztDiU4kSGWx6pxBer0QeiCzHvpNfCIS+cEJjtJYqPEHjnerhbcWF/S5q/PvsH9csrpW+WWoA1dbB6pL1D01FWYNhfFjxOcCZKCxWd704TgDX2DmKWbFOjq6nDr283E7pwAXzCPBrPkRtJ9jbyZutrVHtlgs11/AZNy4tkL1klZ35MSaRQkaoPzCMQ7tyeUPtis=
install:
- pip install pipenv
- pipenv install
- aws configure set aws_access_key_id $AWS_ACCESS_KEY
- aws configure set aws_secret_access_key $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule create --scenario-name aws
- molecule converge --scenario-name aws
- molecule verify --scenario-name aws
- molecule destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
