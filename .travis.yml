language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: 'true'
  - ROLE_NAME: tomcat8
  - EC2_REGION: us-east-1
  - secure: USsgLNWDKn0w+J7YENfh7D1LkaqTOj/5bzlF1BPTF1eA7gA1WZERjXeNQARZwr8RYrDy7a9m40zBrAnjDufm877c+1XVJh9jojBqCtUiYqhpQYqfGY3GuMKoupXHsnxBD5k+MGyZbc6Iy0mldyvhiyWYNCfCPH89XvEs80tjfSEDr694KhtG2BfGxgRK9GOz14sMZ684+V/r5bqf27rDrW7nHDOhs55eUaNwR5VUjePwDRjtu0gFUN0N5I97U74cwaXmHa9s5NBxV1K4OnJ/N9sxxZ+I7uaAaXSDmQuYRZBjq3hWTDvS0AL8m2EVa3AFSNWoLp4rLAPeVltfU4KsXokvn4YJLE5x8JwP0hU8G/3pRryFg8RGMAMnAatsA7JppztqLH9mPd9KQG1J0eTfvacsOn09u0U2S+NgLdToSu0Q7JeDTlBry6JDL73+LAuPxfHbs/BVJ3tfrbIUSIGLTzqw5TSvH3ltN55ggbkcRagEVUGm3OJfiY02YumnKIQpuEp0e+3HP3ZtOx+Ojh3y9ircg5Os0Dpo8uDcUT7d4myg2d8WNQVP9UhMlwGzkqTGlGg1CTTUGfDcknOSEC15zn3m6xNOY86TITMV3um8j+4S9ybsjRtandny4j0yP0HExlwXajFosxsEODoDHbut6+HKY8gXAZkiwVawiqWfLks=
  - secure: XYDPc57JNUYxSS4LT7uu4mQAqNVFP7LBFqbfFzLy6hWSY6RU+lBc0Skj5g8TRj5uQ1xOJDEWZE4R62yi75LlAu9hivc9Ak9XrxGpf/389384Si9Qqu7BZOAEPA6r5x9tiNlb1JLFKoiIULj4AX51460ssVtNzv0iugK1xm2r8TVnJwKpS/on5EEc4s4ENEaRmOlpiAY1AOE+u+oemiswkSV4PtGjPvByyUldDs5GWuyVuoqEcqR5NEp2hQ69elqvH+AP/bCz6w+bU9K9jHT2i+GkYOWxN+wUuWvfIu4NpIzrsFX7bIWh1Qk3eeWFgNlOLYG61h8riXqgj2IwJuVMwK7nUdwGUJwVmwk4cMGpgvT7xXdLI/a6VOR3oQQitUSYl2njelA9Js0daMkw1bCqFeQcd4g5FaJnKgtoEQVrvX35B1NFn406ZNynrjwt/lCr+qnFYr2KFp4o8rovbDaC+pqU/2MgnQdpfD8mH9BTKvX0xdkyXI5dWMYdXab3rIXl3hsMZDpvysDViHADUWmYhazd6Cl3A7lBAa+GS2SxoyyYfMjQZSavFAu06+EzqYDIKzUgXBU7e4qRJW027WOt0JowaLC7ZT8uEfp+MAxWxFr9su5UIZfKRZHHzxcnhrheWapAzvdhrCy4FjZANhOKWypHeOcy717RG+U6GUrSzks=
  - secure: OnE1FEgBV7/p0dBK4BJnJ3y/F+OIGTLrfANGPfpmC8vl20UoDMbX9U9UkirJFQbsrk4V8mn6XyPNDIvUHj15THJIc6Ol0j9WLojfWyxl2sfcuqJlvVa5psX/7UCEHfOeSGm/Iwth+jnCPu9WVgpOEUGV/u4wGsVOtjWODps5QHM1vhLiXPJLRi2XEHPH7V/W7Wb7xf4+vKi3cYKQtzEhgeGXfiOqJx/WouKOoixTTybv5no1CRd7FAxjomG+Lg6YZ378j/R/EoGXaSrjJJ1jV+j3hQrqfWx1cnY1TgRT6wqBhf3Ue/zlYmoI5gY31hoaYYVN71e65tyV0YxBgxmYkWtjShoEGJ94IVTlsXqwHkdXW94YEZwcxZ1Ml2vb6UQRiqiQXWtK85+r58wqU0xbzLDHwTTq0RbzRqE25/vn9UysQFTmfPv1u7Zgq0MfISV5bBWmCKAuCe+5HL+919J0ZywbQawmQmqp6yRJ6lWHTDzNEL3lSXAVzy2XVgfYs+9zEVRFHYdPvCzXN4522BIr1XEKPn9Eme/FdrjDp4pebV4swlD0ZE2EK/s8gsKlOuzWYWCdixFY5x6/waZTptjQHtZyw/tnzXkejhQ6X8ZkCjlUFBeK1PTKVdDT64AqX/3jd827qICsmJ5mJvrhY2NuOKH9UMdCYIaaJxSbp7kJEIw=
  - secure: bicqDlFkbjhtxeLOW2yTuNAj217R23Fx6ac9ZxvoTcDDVilrx/axejRtERr5s/nLmFl3axZg6pxjg/OF54HRnIHexdDiKOTkiO16Y+4CBfnWpUhM/tsudUPTihrWfcrP1EREGsbRLTNGkR3tCDI/m/xrxsWTz+PJ3LnsuB1tzBWej09pCjA9km0wiDk5X1JsJpyDW78aBdfvCSi3ydF4YwnH1U+cD8xcNY3HHYXaaW9rWyWCYcMAnoCX+sHV3KyDvoqEgWBbRg1OLSQYzrUaCZTJ9BVQN849Q9feBHTCIlPEJVYWlioNWvo42J7Qm9HHZEJL2RP2bzj1UI17By3izOYjyp7U7npHGEDsaUmCAWwJoRlI7vfgexWGORscAEdrK3MaZkrvqw+xOyMr9XutXMeirp4ZnUT3WDSdx2yxEGLfKOVVF1G4oB6DOvgx9CPjGslyoYmnBNJHdjMif2PjjYkJBe7wbI1LOT2sxptZBy9QulTgEddqZJ71fROWd77Bb6gakl1N6QP8ikbRA9wn/KeDCOxtnbj0UdM1s53skgPb1uM16XStuvgrDq8rdm8i0PK6pT/H8p4ucIUVwY8wnHgorWd3CyshKlpKBkyVBag0rEi9N/fxFEe2qIZx/T8PkeI9XYOjHXwRIUl8xbu1WlOib3V63f4eSroJPcLFApo=
install:
- pip install pipenv
- pipenv install
- aws configure set aws_access_key_id $AWS_ACCESS_KEY
- aws configure set aws_secret_access_key $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule create --scenario-name aws
- molecule converge --scenario-name aws
- molecule verify --scenario-name aws
- molecule destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
